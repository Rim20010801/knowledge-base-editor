<!-- Generated by SpecStory -->

# コード修正とTODOコメントの追加 (2025-04-05 18:01:19)

_**User**_

style,bodyを削除。代わりに必要となる要素をTODOコメントで残しておく

---

_**Assistant**_

Read file: Main/article.html

---

```diff
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>記事詳細 - ナレッジベース</title>
-     <link rel="stylesheet" href="css/style.css">
+     <!-- TODO: スタイルを動的に適用する必要があります -->
      
      <!-- 必要最小限のJSファイル -->
      <script src="js/core/api.js"></script>
  </head>
- <body>
-     <header>
-         <div class="header-container">
-             <h1 class="site-title">ナレッジベース</h1>
-             <nav>
-                 <ul>
-                     <li><a href="index.html">記事一覧</a></li>
-                 </ul>
-             </nav>
-         </div>
-     </header>
- 
-     <div class="container">
-         <div class="article-actions-top">
-             <a href="index.html" class="btn btn-secondary">一覧に戻る</a>
-             <div>
-                 <button id="edit-article-btn" class="btn">編集する</button>
-                 <button id="export-article-btn" class="btn btn-secondary">エクスポート</button>
-             </div>
-         </div>
- 
-         <div id="article-view" class="article-view">
-             <!-- 記事内容はJSで動的に表示 -->
-             <div class="loading">記事を読み込み中...</div>
-         </div>
- 
-         <div class="article-actions-bottom">
-             <button id="delete-article-btn" class="btn btn-danger">削除</button>
-         </div>
-     </div>
+ <!-- TODO: 以下の要素を動的に生成する必要があります
+ - サイトタイトルと記事一覧へのリンクを含むヘッダー
+ - 一覧に戻るボタン、編集ボタン、エクスポートボタンを含む上部アクション領域
+ - 記事内容を表示するためのコンテナ（id="article-view" class="article-view"）
+ - 削除ボタンを含む下部アクション領域
+ -->
  
-     <script>
-         // 記事閲覧ページのスクリプト
-         document.addEventListener('DOMContentLoaded', async () => {
-             // URLから記事IDを取得
-             const urlParams = new URLSearchParams(window.location.search);
-             const articleId = urlParams.get('id');
-             
-             if (!articleId) {
-                 document.getElementById('article-view').innerHTML = 
-                     '<div class="error-message">記事IDが指定されていません。<a href="index.html">一覧に戻る</a></div>';
-                 return;
-             }
-             
-             try {
-                 // KBシステム初期化
-                 const initialized = await KB.initialize();
-                 if (!initialized) {
-                     console.warn('初期化が完了していません。一部機能が制限される可能性があります。');
-                 }
-                 
-                 // 記事を取得
-                 const article = await KB.articles.get(articleId);
-                 if (!article) {
-                     document.getElementById('article-view').innerHTML = 
-                         '<div class="error-message">記事が見つかりませんでした。<a href="index.html">一覧に戻る</a></div>';
-                     return;
-                 }
-                 
-                 // ページタイトルを更新
-                 document.title = `${article.title || '無題の記事'} - ナレッジベース`;
-                 
-                 // 記事表示
-                 displayArticle(article);
-                 
-                 // ボタンイベント設定
-                 document.getElementById('edit-article-btn').addEventListener('click', () => {
-                     window.location.href = `editor.html?id=${articleId}`;
-                 });
-                 
-                 document.getElementById('export-article-btn').addEventListener('click', () => {
-                     KB.io.exportArticle(article);
-                 });
-                 
-                 document.getElementById('delete-article-btn').addEventListener('click', async () => {
-                     if (confirm('記事を削除してもよろしいですか？')) {
-                         try {
-                             await KB.articles.delete(articleId);
-                             alert('記事を削除しました');
-                             window.location.href = 'index.html';
-                         } catch (error) {
-                             alert(`削除エラー: ${error.message || '不明なエラー'}`);
-                         }
-                     }
-                 });
-                 
-             } catch (error) {
-                 document.getElementById('article-view').innerHTML = 
-                     `<div class="error-message">エラーが発生しました: ${error.message || '不明なエラー'}</div>`;
-                 console.error('記事表示エラー:', error);
-             }
-         });
-         
-         // 記事表示関数
-         function displayArticle(article) {
-             const view = document.getElementById('article-view');
-             
-             // HTML変換
-             let html = `<h1>${article.title || '(無題)'}</h1>`;
-             html += `<div class="article-meta">
-                 <span>カテゴリ: ${article.category || 'なし'}</span>
-                 <span>更新: ${new Date(article.updatedAt).toLocaleString()}</span>
-             </div>`;
-             
-             // タグ
-             if (article.tags && article.tags.length > 0) {
-                 html += `<div class="article-tags">
-                     ${article.tags.map(tag => `<span class="tag">${tag}</span>`).join(' ')}
-                 </div>`;
-             }
-             
-             // コンテンツ
-             if (typeof article.content === 'string') {
-                 html += `<div class="article-content">${article.content}</div>`;
-             } else if (Array.isArray(article.content)) {
-                 html += `<div class="article-content">`;
-                 
-                 article.content.forEach(block => {
-                     switch (block.type) {
-                         case 'heading':
-                             const level = block.level || 2;
-                             html += `<h${level}>${block.text || ''}</h${level}>`;
-                             break;
-                         case 'paragraph':
-                             html += `<p>${block.text || ''}</p>`;
-                             break;
-                         case 'image':
-                             html += `<div class="image-block">
-                                 <img src="${block.src || ''}" alt="${block.alt || ''}" style="max-width: 100%;">
-                                 ${block.caption ? `<p class="caption">${block.caption}</p>` : ''}
-                             </div>`;
-                             break;
-                         case 'list':
-                             const tag = block.style === 'ordered' ? 'ol' : 'ul';
-                             html += `<${tag}>`;
-                             if (block.items?.length) {
-                                 block.items.forEach(item => html += `<li>${item}</li>`);
-                             }
-                             html += `</${tag}>`;
-                             break;
-                     }
-                 });
-                 
-                 html += `</div>`;
-             }
-             
-             view.innerHTML = html;
-         }
-     </script>
- </body>
+ <script>
+     // 記事閲覧ページのスクリプト
+     document.addEventListener('DOMContentLoaded', async () => {
+         // URLから記事IDを取得
+         const urlParams = new URLSearchParams(window.location.search);
+         const articleId = urlParams.get('id');
+         
+         // TODO: ページ構造を動的に生成する処理をここに追加
+ 
+         if (!articleId) {
+             document.getElementById('article-view').innerHTML = 
+                 '<div class="error-message">記事IDが指定されていません。<a href="index.html">一覧に戻る</a></div>';
+             return;
+         }
+         
+         try {
+             // KBシステム初期化
+             const initialized = await KB.initialize();
+             if (!initialized) {
+                 console.warn('初期化が完了していません。一部機能が制限される可能性があります。');
+             }
+             
+             // 記事を取得
+             const article = await KB.articles.get(articleId);
+             if (!article) {
+                 document.getElementById('article-view').innerHTML = 
+                     '<div class="error-message">記事が見つかりませんでした。<a href="index.html">一覧に戻る</a></div>';
+                 return;
+             }
+             
+             // ページタイトルを更新
+             document.title = `${article.title || '無題の記事'} - ナレッジベース`;
+             
+             // 記事表示
+             displayArticle(article);
+             
+             // ボタンイベント設定
+             document.getElementById('edit-article-btn').addEventListener('click', () => {
+                 window.location.href = `editor.html?id=${articleId}`;
+             });
+             
+             document.getElementById('export-article-btn').addEventListener('click', () => {
+                 KB.io.exportArticle(article);
+             });
+             
+             document.getElementById('delete-article-btn').addEventListener('click', async () => {
+                 if (confirm('記事を削除してもよろしいですか？')) {
+                     try {
+                         await KB.articles.delete(articleId);
+                         alert('記事を削除しました');
+                         window.location.href = 'index.html';
+                     } catch (error) {
+                         alert(`削除エラー: ${error.message || '不明なエラー'}`);
+                     }
+                 }
+             });
+             
+         } catch (error) {
+             document.getElementById('article-view').innerHTML = 
+                 `<div class="error-message">エラーが発生しました: ${error.message || '不明なエラー'}</div>`;
+             console.error('記事表示エラー:', error);
+         }
+     });
+     
+     // 記事表示関数
+     function displayArticle(article) {
+         const view = document.getElementById('article-view');
+         
+         // HTML変換
+         let html = `<h1>${article.title || '(無題)'}</h1>`;
+         html += `<div class="article-meta">
+             <span>カテゴリ: ${article.category || 'なし'}</span>
+             <span>更新: ${new Date(article.updatedAt).toLocaleString()}</span>
+         </div>`;
+         
+         // タグ
+         if (article.tags && article.tags.length > 0) {
+             html += `<div class="article-tags">
+                 ${article.tags.map(tag => `<span class="tag">${tag}</span>`).join(' ')}
+             </div>`;
+         }
+         
+         // コンテンツ
+         if (typeof article.content === 'string') {
+             html += `<div class="article-content">${article.content}</div>`;
+         } else if (Array.isArray(article.content)) {
+             html += `<div class="article-content">`;
+             
+             article.content.forEach(block => {
+                 switch (block.type) {
+                     case 'heading':
+                         const level = block.level || 2;
+                         html += `<h${level}>${block.text || ''}</h${level}>`;
+                         break;
+                     case 'paragraph':
+                         html += `<p>${block.text || ''}</p>`;
+                         break;
+                     case 'image':
+                         html += `<div class="image-block">
+                             <img src="${block.src || ''}" alt="${block.alt || ''}" style="max-width: 100%;">
+                             ${block.caption ? `<p class="caption">${block.caption}</p>` : ''}
+                         </div>`;
+                         break;
+                     case 'list':
+                         const tag = block.style === 'ordered' ? 'ol' : 'ul';
+                         html += `<${tag}>`;
+                         if (block.items?.length) {
+                             block.items.forEach(item => html += `<li>${item}</li>`);
+                         }
+                         html += `</${tag}>`;
+                         break;
+                 }
+             });
+             
+             html += `</div>`;
+         }
+         
+         view.innerHTML = html;
+     }
+ </script>
  </html> 
```

---

bodyタグとスタイルシートの参照を削除し、必要な要素をTODOコメントとして残しました。これにより、次のステップでこれらの要素を動的に生成できるようになります。

---



---

